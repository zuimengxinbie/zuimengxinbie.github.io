---
title: è®¤è¯†axios
date: 2021-10-01 00:00:00
sidebar: auto
sticky: false
permalink: /pages/axios211001/
categories:
  - æŠ€æœ¯
tags:
  - axios  
---

<p align="center">
  <img width="500" src="https://p15.qhimg.com/dmfd/2560_1440_/t0141ccd6630f7b13c8.jpg"/>
</p>


> å¾…å®Œå–„ï¼Œæ„Ÿè°¢æŒ‡æ•™ğŸŒ¹ğŸŒ¹ğŸŒ¹
> <!-- more -->

## axios

- åˆ›å»ºå®ä¾‹

  axios.create([confing])

  ```javascript
  const instance = axios.create({
    baseURL: 'https://some-domain.com/api/',
    timeout: 1000,
    headers: {'X-Custom-Header': 'foobar'}
  });
  ```

- è¯·æ±‚é…ç½®

  ```javascript
  {
  	baseURL: 'https://qizuang.com',   // å°†è‡ªåŠ¨åŠ åœ¨â€™urlâ€˜çš„å‰é¢
  	url: '/user',   // è¯·æ±‚çš„æœåŠ¡å™¨åœ°å€
  	method: 'get', // default
  	header: {'X-Requested-With': 'XMLHttpRequest'}  // è‡ªå®šä¹‰è¯·æ±‚å¤´
  	params: {id: 123}     // urlä¸Šå‚æ•°, get è¯·æ±‚
  	dataï¼š { name: 'jack' }  // è¯·æ±‚ä¸»ä½“å‚æ•°ï¼Œ postè¯·æ±‚
  	timeoutï¼š 1000ï¼Œ // è¯·æ±‚è¶…è¿‡1000ç§’ï¼Œè¯·æ±‚è¢«ä¸­æ–­
  	onUploadProgress: function(progressEvent){}  // ä¸Šä¼ è¿›åº¦
  	onDownloadProgress: function(progressEvent){} // ä¸‹è½½è¿›åº¦
  	withCredentials: true  // è·¨åŸŸè¯·æ±‚æ˜¯å¦ï¼Œ
      proxy: {
          host: '127.0.0.1',
          port: 9000,
          auth: {
              username: 'jack',
              password: '123123'    
          }    
      }
  }
  ```

- å“åº”ç»“æ„

  ```javascript
  {
  	data: {}ï¼Œ  // æœåŠ¡å™¨æä¾›çš„å“åº”
  	statusï¼š 200 // å“åº”çš„httpçŠ¶æ€ç 
  	statuTextï¼š 'ok'  // æœåŠ¡å™¨å“åº”çš„HTTPçŠ¶æ€ä¿¡æ¯
  	headerï¼š {}  // æœåŠ¡å™¨å“åº”çš„å¤´
  	configï¼š {}  // è¯·æ±‚æä¾›çš„é…ç½®ä¿¡æ¯
  	requestï¼š {}
  }
  ```

- é…ç½®çš„ä¼˜å…ˆé¡ºåº(**é€æ­¥è¦†ç›–**)

  ```javascript
  var instance = axios.create(
  	timeout: 0  // ä¸å†™é»˜è®¤æ˜¯0
  );
  
  instance.defaults.timeout = 2500;
  
  instance.get('/longRequest', {
  	tiemout: 5000
  })
  ```

- æ‹¦æˆªå™¨

  ```javascript
  // æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨
  axios.interceptors.request.use(function (config) {
      // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ
      return config;
    }, function (error) {
      // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ
      return Promise.reject(error);
    });
  
  // æ·»åŠ å“åº”æ‹¦æˆªå™¨
  axios.interceptors.response.use(function (response) {
      // å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ
      return response;
    }, function (error) {
      // å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ
      return Promise.reject(error);
    });
    
    // ç§»é™¤æ‹¦æˆªå™¨
    const myInterceptor = axios.interceptors.request.use(function () {/*...*/});
    axios.interceptors.request.reject(myInterceptor);
  ```

- HTTP header

  - host

    ç«¯å£å·ï¼Œæœ‰ç‚¹è¯·æ±‚ä½¿ç”¨é»˜è®¤ç¼ºçœç«¯å£å·ï¼Œæ‰€ä»¥ä¸ç”¨å†™

  - referer

    æ¥æºï¼š å¯ä»¥çœ‹åˆ°æ¥æºçš„ç½‘å€

    é€šè¿‡Referrer Policyå»ä¿®æ”¹referer**å†…å®¹**

    > - ç©ºå­—ç¬¦ä¸²ã€no-referrerï¼šä¸æ˜¾ç¤ºä»»ä½•ä¿¡æ¯åœ¨è¯·æ±‚å¤´ä¸­
    >
    > - no-referrer-when-downgrade
    >
    >   é™çº§çš„æƒ…å†µä¸‹ä¸æ˜¾ç¤ºï¼Œå…¶ä»–æƒ…å†µæ˜¾ç¤º
    >
    > - origin: åªæ˜¾ç¤ºæºåœ°å€ï¼ˆåè®®ã€åŸŸåã€ç«¯å£ï¼‰ï¼Œä¸åŒ…æ‹¬å®Œæ•´çš„è·¯å¾„
    >
    > - æœ€å¥½ã€å»ºè®®
    >
    >   ```javascript
    >   strict-origin`å’Œs`trict-origin-when-cross-origin
    >   ```

    

  - User-Agent

    å‘Šè¯‰ç½‘å€æœåŠ¡å™¨æ˜¯é€šè¿‡ä»€ä¹ˆå·¥å…·è¯·æ±‚æ¥çš„ï¼Œå¦‚æœæ˜¯çˆ¬è™«è¯·æ±‚ï¼ˆæ‹’ç»ï¼‰ï¼Œå¦‚æœæ˜¯ç”¨æˆ·æµè§ˆï¼ˆåº”ç­”ï¼‰

    åˆ¤æ–­ç”¨æˆ·ä½¿ç”¨ä»€ä¹ˆæµè§ˆå™¨æ‰“å¼€ä½ çš„ç½‘ç«™

  - Content-typeï¼ˆå¸¸ç”¨ï¼‰
  
    > application/json: JSONæ•°æ®æ ¼å¼
    >
    > multipart/form-data: è¡¨å•ä¸Šä¼ 
    >
    > application/vnd.ms-excel: ä¸‹è½½è¡¨æ ¼ï¼Œå¯¼å‡ºï¼ˆ.xlsï¼‰

  - Accept-Language

    æµè§ˆå™¨å¯ä»¥æ¥å—çš„è¯­è¨€ç§ç±»

  - Cookie

  - headerå¸¸è§çš„å®‰å…¨æ”»å‡»

  - å¤§å…¨

    [httpHeader](http://tools.jb51.net/table/http_header)

    Acceptï¼š * / * æ¥æ”¶ä»»æ„ç±»å‹