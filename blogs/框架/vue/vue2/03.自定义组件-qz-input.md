---
title: ç»„ä»¶åº“â€”qz-Input
date: 2021-04-23 00:00:00
sidebar: auto
sticky: false
permalink: /pages/vue210423/
categories: 
  - æ¡†æ¶
tags: 
  - vue
---

<p align="center">
  <img width="500" src="https://p19.qhimg.com/dmfd/2560_1440_/t016fa822379b1628d6.jpg"/>
</p>


> å¾…å®Œå–„ï¼Œæ„Ÿè°¢æŒ‡æ•™ğŸŒš
> <!-- more -->

## ç»„ä»¶åº“â€”qz-Input

### Attributes

|     å‚æ•°     |         è¯´æ˜         |     ç±»å‹      |           å¯é€‰å€¼           | é»˜è®¤å€¼ |
| :----------: | :------------------: | :-----------: | :------------------------: | :----: |
|   v-model    |        ç»‘å®šå€¼        | string/number |             â€”â€”             |   â€”â€”   |
|    class     |         ç±»å         |    string     |             â€”â€”             |   â€”â€”   |
|  showLength  |   æ˜¯å¦æ˜¾ç¤ºé•¿åº¦é™åˆ¶   |    boolean    |             â€”â€”             | false  |
|  maxlength   |     æœ€å¤§è¾“å…¥é•¿åº¦     | string/number |             â€”â€”             |   â€”â€”   |
|  minlength   |     æœ€å°è¾“å…¥é•¿åº¦     | string/number |             â€”â€”             |   â€”â€”   |
| placeholder  |     æ–‡æœ¬æç¤ºè¾“å…¥     |    string     |             â€”â€”             |   â€”â€”   |
|  clearable   |      æ˜¯å¦å¯æ¸…ç©º      |    boolean    |             â€”â€”             | false  |
| showPassword |   åˆ‡æ¢ä¸ºå¯†ç æ–‡æœ¬æ¡†   |    boolean    |             â€”â€”             | false  |
|   disabled   |         ç¦ç”¨         |    boolean    |             â€”â€”             | false  |
|    width     |      æ–‡æœ¬æ¡†å®½åº¦      | string/number |             â€”â€”             |   â€”â€”   |
|    height    |      æ–‡æœ¬æ¡†é«˜åº¦      | string/number |             â€”â€”             |   52   |
|  useSearch   |    ä½¿ç”¨å¸¦å»ºè®®è¾“å…¥    |    boolean    |             â€”â€”             | false  |
|  searchList  |   å¸¦å»ºè®®è¾“å…¥çš„æ•°æ®   |     Array     |             â€”â€”             |   []   |
|  handClick   | é€‰æ‹©å¸¦å»ºè®®è¾“å…¥çš„å›è°ƒ |     event     |             â€”â€”             |   â€”â€”   |
|     slot     |  è¾“å…¥æ¡†å¤´éƒ¨å°¾éƒ¨æ’æ§½  |     tags      | beforeContent/afterContent |   â€”â€”   |

### åŸºç¡€ç”¨æ³•

#### 1. è¾“å…¥æ¡†

> `v-model` ä¿®é¥°ç¬¦

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20210712112841444.png)

```vue
<qz-Input v-model = "text" placeholder="è¯·è¾“å…¥å†…å®¹"></qz-Input>
<script>
export default {
  data() {
    return {
      text: ''
    }
  }
}
</script>
```

#### 2. ç¦ç”¨çŠ¶æ€

> é€šè¿‡ `disabled` å±æ€§æŒ‡å®šæ˜¯å¦ç¦ç”¨ input ç»„ä»¶

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20210712112901524.png)

```vue
<qz-Input 
    v-model = "text" 
    placeholder="è¯·è¾“å…¥å†…å®¹"
    :disabled="disabled">
</qz-Input>
<script>
export default {
  data() {
    return {
      text: '',
      disabled: true,
    }
  }
}
</script>

```

#### 3. å¯æ¸…ç©ºçŠ¶æ€

> ä½¿ç”¨`clearable`å±æ€§å³å¯å¾—åˆ°ä¸€ä¸ªå¯æ¸…ç©ºçš„è¾“å…¥æ¡†

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20210712112913618.png)

```vue
<qz-Input 
    v-model = "text" 
    placeholder="è¯·è¾“å…¥å†…å®¹"
    clearable>
</qz-Input>
<script>
export default {
  data() {
    return {
      text: ''
    }
  }
}
</script>
```

#### 4. ä¸åŒå®½åº¦/é«˜åº¦

> ä½¿ç”¨`width`/`height`å±æ€§å³å¯å¾—åˆ°ä¸€ä¸ªè‡ªå®šä¹‰çš„æ–‡æœ¬æ¡†

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20210712112932114.png)

```vue
<qz-Input 
    v-model = "text" 
    placeholder="è¯·è¾“å…¥å†…å®¹"
    width = 400>
</qz-Input>
<script>
export default {
  data() {
    return {
      text: ''
    }
  }
}
</script>
```

#### 5. å¯†ç æ¡†

> ä½¿ç”¨`showPassword`å±æ€§å³å¯å¾—åˆ°ä¸€ä¸ªå¯åˆ‡æ¢æ˜¾ç¤ºéšè—çš„å¯†ç æ¡†

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2021071211294055.png)

```vue
<qz-Input 
    v-model = "text" 
    placeholder="è¯·è¾“å…¥å¯†ç "
    showPassword>
</qz-Input>
<script>
export default {
  data() {
    return {
      text: ''
    }
  }
}
</script>
```

#### 6. è¾“å…¥é•¿åº¦é™åˆ¶

> ä½¿ç”¨`maxlength`å’Œ`minlength`å±æ€§é™åˆ¶æ–‡æœ¬è¾“å…¥æ¡†çš„æ–‡æœ¬è¾“å…¥ã€‚
>
> å½“è®¾ç½®`maxlength`å°±ä¼šåœ¨æ–‡æœ¬æ¡†å³ä¾§ä¼šè‡ªåŠ¨å±•ç¤ºå‡ºæ–‡æœ¬è¾“å…¥é•¿åº¦ï¼Œ
>
> å½“è®¾ç½®`minlength`æ—¶ï¼Œå½“è¾“å…¥é•¿åº¦ä¸æ»¡è¶³æ¡ä»¶æ—¶ä¼šå‡ºç°æç¤ºã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20210712113027931.png)

```vue
<qz-Input 
    v-model = "text" 
    placeholder="è¯·è¾“å…¥å†…å®¹"
    showLength
    minlength = 2
    maxlength = 10>
</qz-Input>
<script>
export default {
  data() {
    return {
      text: ''
    }
  }
}
</script>
```

#### 7. æ˜¯å¦æ˜¾ç¤ºé•¿åº¦é™åˆ¶

> ä½¿ç”¨`showLength`å±æ€§æ§åˆ¶é•¿åº¦çš„æ˜¾ç¤º

#### 8. å¤åˆå‹è¾“å…¥æ¡†

> å¯å‰ç½®æˆ–åç½®å…ƒç´ ï¼Œä¸€èˆ¬ä¸ºæ ‡ç­¾æˆ–æ–‡æœ¬

![](https://i.postimg.cc/MHPbRXL9/1649312302-1.png)

```vue
<qz-Input 
    v-model = "text" 
    placeholder="è¯·è¾“å…¥å†…å®¹"
    width = 400>
    <div slot ="beforeContent"><svg-icon icon-class="phone" class-name="custom-phone" /></div>
    <div slot ="afterContent">è¯·è¾“å…¥éªŒè¯ç </div>
</qz-Input>
<script>
export default {
  data() {
    return {
      text: ''
    }
  }
}
</script>
```

#### 9. å¸¦è¾“å…¥å»ºè®®

> ä½¿ç”¨`useSearch`å±æ€§å³å¯è®¾ç½®ä¸ºä¸€ä¸ªå¸¦è¾“å…¥å»ºè®®çš„æ–‡æœ¬æ¡†ï¼Œ
>
> é€šè¿‡ç»‘å®š`searchList`å±æ€§è®¾ç½®è¾“å…¥å»ºè®®çš„æ•°æ®ï¼Œ
>
> åŒæ—¶ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ç»‘å®š`handClick`äº‹ä»¶è·å–æ¯æ¬¡é€šè¿‡é€‰æ‹©è¾“å…¥å»ºè®®å¾—åˆ°çš„å…·ä½“æ•°æ®å†…å®¹ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20210712113012349.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2OTk1ODY0,size_16,color_FFFFFF,t_70)

```vue
<qz-Input 
    v-model = "text" 
    placeholder="è¯·è¾“å…¥å†…å®¹"
    width = 400
    useSearch
    :searchList = "searchData"
    @handClick = "handClick">
</qz-Input>
<script>
export default {
  data() {
    return {
      text: '',
      searchData:[
          { "value": "ä¸‰å…¨é²œé£Ÿï¼ˆåŒ—æ–°æ³¾åº—ï¼‰", "address": "é•¿å®åŒºæ–°æ¸”è·¯144å·" },
          { "value": "Hot honey é¦–å°”ç‚¸é¸¡ï¼ˆä»™éœè·¯ï¼‰", "address": "ä¸Šæµ·å¸‚é•¿å®åŒºæ·è™¹è·¯661å·" },
          { "value": "æ–°æ—ºè§’èŒ¶é¤å…", "address": "ä¸Šæµ·å¸‚æ™®é™€åŒºçœŸåŒ—è·¯988å·åˆ›é‚‘é‡‘æ²™è°·6å·æ¥¼113" },
          { "value": "æ³·åƒå®¶(å¤©å±±è¥¿è·¯åº—)", "address": "å¤©å±±è¥¿è·¯438å·" },
          { "value": "èƒ–ä»™å¥³çº¸æ¯è›‹ç³•ï¼ˆä¸Šæµ·å‡Œç©ºåº—ï¼‰", "address": "ä¸Šæµ·å¸‚é•¿å®åŒºé‡‘é’Ÿè·¯968å·1å¹¢18å·æ¥¼ä¸€å±‚å•†é“º18-101" },
          { "value": "è´¡èŒ¶", "address": "ä¸Šæµ·å¸‚é•¿å®åŒºé‡‘é’Ÿè·¯633å·" },
          { "value": "è±ªå¤§å¤§é¦™é¸¡æ’è¶…çº§å¥¶çˆ¸", "address": "ä¸Šæµ·å¸‚å˜‰å®šåŒºæ›¹å®‰å…¬è·¯æ›¹å®‰è·¯1685å·" },
          { "value": "èŒ¶èŠå…°ï¼ˆå¥¶èŒ¶ï¼Œæ‰‹æŠ“é¥¼ï¼‰", "address": "ä¸Šæµ·å¸‚æ™®é™€åŒºåŒæ™®è·¯1435å·" },
      ],
    }
  },
  methods:{
  	handClick(data){
      console.log(data)
    }
  }
}
</script>
```

### æ ·å¼ç¯‡

> åˆ©ç”¨ ::v-deep æ ·å¼ç©¿é€è¦†ç›–

```css
::v-deep .inputBox {
	border-radius: 26px;
    &:focus-within {
        border: 1px solid #ff6700;
    }
}
```

### codeï¼ˆæºç å®ç°ï¼‰

```vue
<template>
  <div class="inputBox" :style="inputBoxStyle">
    <!-- å‰éƒ¨æ’æ§½ -->
    <div class="beforeContent" v-if="beforeContent">
      <slot name="beforeContent"></slot>
    </div>
    <div class="inputContent" :style="inputContentStyle">
      <input
        :type="chooseInputType"
        :placeholder="$attrs.placeholder"
        ref="inputRef"
        :style="inputStyle"
        :disabled="disabled"
        :maxlength="$attrs.maxlength !== '' ? $attrs.maxlength : ''"
        :minlength="$attrs.minlength !== '' ? $attrs.minlength : ''"
        @input="setText($event)"
        @click="showSearchList"
      />
      <!-- è¾“å…¥é•¿åº¦ç›‘å¬ -->
      <div class="showIptNum" v-if="$attrs.maxlength && ($attrs.showLength == '' || $attrs.showLength)">
        {{ iptTextNum }}/{{ $attrs.maxlength }}
      </div>
      <!-- è¾“å…¥æ¡†é”™è¯¯æç¤º -->
      <span class="messageBox" style="display: none" :style="messageStyle">{{
        msgText
      }}</span>

      <!-- æ¸…ç©ºæ–‡æœ¬æŒ‰é’® -->
      <div class="reset-box" v-if="$attrs.clearable == '' || $attrs.clearable" @click="clearText">
        <van-icon name="close" class="reset" />
      </div>
    </div>
    <!-- åéƒ¨æ’æ§½ -->
    <div class="afterContent" v-if="afterContent">
      <slot name="afterContent"></slot>
    </div>
    <!-- æœç´¢æç¤ºåˆ—è¡¨ -->
    <ul
      class="searchList"
      :style="searchListStyle"
      v-if="searchListIsShow && $attrs.useSearch == '' && searchList.length > 0"
    >
      <li v-for="item in searchList" :key="item.value" @click="handClick(item)">
        {{ item.value }}
      </li>
    </ul>
  </div>
</template>

<script>
import { Toast } from 'vant'
export default {
  name: 'qz-Input',
  props: {
    value: {
      // åŒå‘ç»‘å®šä¼ å‚
      type: String,
      default: ''
    },
    disabled: {
      // ç¦ç”¨ä¼ å‚
      type: Boolean,
      default: false
    },
    searchList: {
      // æœç´¢åˆ—è¡¨ä¼ å‚
      type: Array,
      default: function () {
        return []
      }
    }
  },
  data () {
    return {
      iptTextNum: 0, // è¾“å…¥æ¡†æ–‡æœ¬æ•°é‡
      searchListIsShow: false, // æœç´¢åˆ—è¡¨æ˜¾ç¤ºçŠ¶æ€
      msgText: '' // è¾“å…¥æ¡†é”™è¯¯æç¤ºæ–‡æœ¬
    }
  },
  methods: {
    setText (e) {
      // åŒå‘ç»‘å®šæ–‡æœ¬å†…å®¹
      this.iptTextNum = e.target.value.length
      this.$emit('input', e.target.value)
      if (
        this.$attrs.minlength &&
        e.target.value.length < this.$attrs.minlength
      ) {
        var msg = `æœ€å°è¾“å…¥é•¿åº¦ä¸º${this.$attrs.minlength}ä½`
        this.msgText = msg
        Toast(msg)
      } else {
        this.msgText = ''
      }
    },
    clearText () {
      // æ¸…ç©ºæ–‡æœ¬
      this.$refs.inputRef.value = ''
      this.$emit('input', '')
    },
    showSearchList () {
      this.searchListIsShow = !this.searchListIsShow
    },
    handClick (item) {
      // é€‰æ‹©æç¤ºä¸‹æ‹‰å€¼
      this.$refs.inputRef.value = item.value
      this.iptTextNum =
        item.value.length > this.$attrs.maxlength
          ? Number(this.$attrs.maxlength)
          : item.value.length
      if (this.$attrs.minlength && this.iptTextNum < this.$attrs.minlength) {
        var msg = `æœ€å°è¾“å…¥é•¿åº¦ä¸º${this.$attrs.minlength}ä½`
        this.msgText = msg
        Toast(msg)
      } else {
        this.msgText = ''
      }
      this.$emit('input', item.value)
      this.$emit('handClick', item)
      this.searchListIsShow = false
    }
  },

  computed: {
    inputBoxStyle () {
      var returnStyle = ''
      if (this.disabled) {
        returnStyle +=
          'background-color: #f5f7fa;border-color: #e4e7ed;color: #c0c4cc;cursor: not-allowed;'
      }
      if (this.$attrs.width > 200) {
        returnStyle += `width:${this.$attrs.width}px;`
      } else if (this.$attrs.width > 0 && this.$attrs.width <= 200) {
        Toast('è®¾ç½®å®½åº¦ä¸å¯å°äº200px')
      }
      return returnStyle
    },
    inputContentStyle () {
      var returnStyle = ''
      return returnStyle
    },
    inputStyle () {
      // è¾“å…¥æ¡†çš„æ ·å¼
      var returnStyle = ''
      if (this.$attrs.height) {
        returnStyle += `height:${this.$attrs.height}px;`
      }
      return returnStyle
    },
    searchListStyle () {
      // ä¸‹æ‹‰æç¤ºæ¡†æ ·å¼
      var returnStyle = ''
      if (this.$attrs.width) {
        returnStyle += `width:${this.$attrs.width}px;`
      }
      if (this.$attrs.height) {
        returnStyle += `top:${this.$attrs.height}px;`
      }
      return returnStyle
    },
    messageStyle () {
      // é”™è¯¯æ ·å¼
      var returnStyle = ''
      if (this.$attrs.height) {
        returnStyle += `top:${this.$attrs.height}px;`
      }
      return returnStyle
    },
    chooseInputType () {
      // åˆ¤æ–­ä¸ºå¯†ç è¾“å…¥æ¡†è¿˜æ˜¯æ™®é€šæ–‡æœ¬æ¡†
      if (this.$attrs.useSearch == '' || this.$attrs.useSearch) {
        return 'text'
      }
      return this.$attrs.showPassword == '' || this.$attrs.showPassword ? 'password' : 'text'
    },
    beforeContent () {
      // å¤´éƒ¨slot
      if (this.$slots.beforeContent?.[0]?.children) {
        return true
      }
      return false
    },
    afterContent () {
      // å°¾éƒ¨slot
      if (this.$slots.afterContent?.[0]?.children) {
        return true
      }
      return false
    }
  }
}
</script>

<style lang="scss" scoped>
.inputBox {
  position: relative;
  width: 100%;
  background: #fff;
  display: flex;
  align-items: center;
  box-sizing: border-box;
  border-radius: 5px;
  border: 1px solid #dcdfe6;
  margin: 20px 0px;
  &:focus-within{
    border: 1px solid #409eff;
  }
  input {
    width: 100%;
    height: 52px;
    border-radius: 40px;
    box-sizing: border-box;
    outline: none;
    padding: 5px 100px 5px 20px;
    cursor: pointer;
  }
  .reset-box {
    position: absolute;
    top: 0px;
    right: 16px;
    width: 20px;
    height: 100%;
    box-sizing: border-box;
    padding-top: 4px;
    display: flex;
    align-items: center;
  }
  .reset {
    color: #dcdfe6;
  }
  .reset:hover {
    color: rgb(129, 128, 128);
    cursor: pointer;
  }
  .beforeContent,
  .afterContent {
    padding: 0 20px;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    white-space: nowrap;
  }
  .beforeContent {
    padding-right: 10px;
  }
  .afterContent {
    padding-left: 10px;
  }
  .inputContent {
    position: relative;
    width: 100%;
  }
  .searchList {
    width: 100%;
    height: 200px;
    overflow: auto;
    padding: 0 15px;
    background: #fff;
    box-sizing: border-box;
    font-size: 14px;
    border: 1px solid #ccc;
    position: absolute;
    top: 54px;
    left: 0;
  }
  .searchList li {
    height: 30px;
    margin: 5px 0;
    padding: 5px 10px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: normal;
  }
  .searchList li:hover {
    background: rgb(231, 231, 231);
    cursor: pointer;
  }
  .showIptNum {
    position: absolute;
    top: 0px;
    right: 46px;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    color: #c0c4cc;
  }
  .messageBox {
    position: absolute;
    font-size: 12px;
    color: red;
    top: 54px;
    left: 10px;
    width: 300px;
  }
}
</style>
```

